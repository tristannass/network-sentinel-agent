{
  "name": "Network Sentinel Incident Response",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "network-alert",
        "options": {}
      },
      "name": "Webhook Receiver",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        100,
        300
      ],
      "notes": "Re√ßoit le payload JSON envoy√© par le script Python (NetworkSentinel)"
    },
    {
      "parameters": {
        "model": "gpt-4-turbo",
        "prompt": {
          "messages": [
            {
              "role": "system",
              "content": "Tu es un ing√©nieur r√©seau expert (NOC). Analyse l'erreur re√ßue et propose 3 actions correctives imm√©diates sous forme de bullet points."
            },
            {
              "role": "user",
              "content": "Erreur re√ßue : {{ $json.body.error_message }}"
            }
          ]
        }
      },
      "name": "AI Analyst Agent",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [
        350,
        300
      ],
      "notes": "Agent IA qui diagnostique la panne avant d'alerter l'humain"
    },
    {
      "parameters": {
        "channel": "noc-alerts",
        "text": "üö® **ALERTE CRITIQUE D√âTECT√âE**\n\n**Erreur :** {{ $json.body.error_message }}\n**Timestamp :** {{ $json.body.timestamp }}\n\nü§ñ **Analyse de l'Agent IA :**\n{{ $json.content }}",
        "otherOptions": {
          "iconEmoji": ":rotating_light:"
        }
      },
      "name": "Slack Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 1,
      "position": [
        600,
        300
      ],
      "notes": "Envoie le rapport complet √† l'√©quipe support"
    }
  ],
  "connections": {
    "Webhook Receiver": {
      "main": [
        [
          {
            "node": "AI Analyst Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Analyst Agent": {
      "main": [
        [
          {
            "node": "Slack Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
